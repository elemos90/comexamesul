# .htaccess NA RAIZ - Redirecionar para /public/

# Desabilitar listagem de diretórios
Options -Indexes
DirectoryIndex index.php

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    
    # Bloquear acesso a arquivos sensíveis
    RewriteRule (\.env|\.sql|\.log|\.bak)$ - [F,L]
    
    # Permitir arquivos e diretórios reais
    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]
    
    # Verificar se o ficheiro existe na pasta public (CSS, JS, imagens, etc.)
    RewriteCond %{DOCUMENT_ROOT}/public/$1 -f
    RewriteRule ^(.*)$ public/$1 [L]
    
    # Tudo o resto vai para public/index.php (routing da aplicação)
    RewriteRule ^(.*)$ public/index.php [QSA,L]
</IfModule>

# Bloquear acesso a arquivos sensíveis
<FilesMatch "\.(env|md|sql|log|ini|sh|bak|config|json|lock)$">
    Require all denied
</FilesMatch>
